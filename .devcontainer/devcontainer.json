{
  "name": "Backend-XeroVault",
  "dockerComposeFile": ["../docker-compose.yml"],
  "service": "xero-backend",
  "workspaceFolder": "/backend",

  // 拡張：存在するものだけ
  "extensions": [
    "ms-python.python",
    "ms-azuretools.vscode-docker",
    "ms-python.isort",
    "ms-python.black-formatter",
    "ms-python.pylance"
  ],

  "settings": {
    // 既定インタプリタ（推奨キー）
    "python.defaultInterpreterPath": "/usr/local/bin/python3",

    // Black で整形
    "python.formatting.provider": "black",
    "editor.formatOnSave": true,
    "editor.codeActionsOnSave": {
      "source.organizeImports": true
    },

    // 解析（タイプチェック）
    "python.analysis.typeCheckingMode": "basic",

    // 端末
    "terminal.integrated.defaultProfile.linux": "/bin/bash"
  },

  // コンテナユーザー（いなければ削除）
  "remoteUser": "vscode",

  // 環境
  "remoteEnv": {
    "PYTHONPATH": "/backend"
  },

  // 起動対象
  "runServices": ["xero-backend"],
  "shutdownAction": "stopCompose",

  "initializeCommand": "echo 'Initializing the development container...'",

  // 絶対パスで安全に
  "postCreateCommand": "pip install --no-cache-dir -r /backend/requirements.txt",

  // ★ compose 側でマウントしているなら通常は不要。使うなら /backend に合わせる
  // "mounts": [
  //   "source=${localWorkspaceFolder},target=/backend,type=bind,consistency=cached"
  // ],

  // compose の CMD をそのまま使いたい時は false に
  "overrideCommand": false
}
